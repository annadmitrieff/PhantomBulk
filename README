┌─┐┬ ┬┌─┐┌┐┌┌┬┐┌─┐┌┬┐┌┐ ┬ ┬┬  ┬┌─
├─┘├─┤├─┤│││ │ │ ││││├┴┐│ ││  ├┴┐
┴  ┴ ┴┴ ┴┘└┘ ┴ └─┘┴ ┴└─┘└─┘┴─┘┴ ┴

This is set of tools for running and processing protoplanetary disk simulations in bulk using PHANTOM and MCFOST on SLURM-managed HPC systems.

┬┌┐┌┌─┐┌┬┐┌─┐┬  ┬  ┌─┐┌┬┐┬┌─┐┌┐┌
││││└─┐ │ ├─┤│  │  ├─┤ │ ││ ││││
┴┘└┘└─┘ ┴ ┴ ┴┴─┘┴─┘┴ ┴ ┴ ┴└─┘┘└┘

Clone the respository (omit the $ when executing commands):

$ git clone https://github.com/annadmitrieff/PhantomBulk.git

┌┬┐┬ ┬┌─┐  ┌─┐┌─┐┬─┐┬┌─┐┌┬┐┌─┐
 │ ├─┤├┤   └─┐│  ├┬┘│├─┘ │ └─┐
 ┴ ┴ ┴└─┘  └─┘└─┘┴└─┴┴   ┴ └─┘

master-script.sh is the main control script.

ppd-physics.py contains the PPD Generator class for generating parameters.

post-process.sh is a post-processing script for generating continuum images with MCFOST.

┌─┐┬─┐┌─┐┌─┐┌┬┐┬┌┐┌┌─┐  ┌─┐┬┌┬┐┬ ┬┬  ┌─┐┌┬┐┬┌─┐┌┐┌┌─┐
│  ├┬┘├┤ ├─┤ │ │││││ ┬  └─┐│││││ ││  ├─┤ │ ││ ││││└─┐
└─┘┴└─└─┘┴ ┴ ┴ ┴┘└┘└─┘  └─┘┴┴ ┴└─┘┴─┘┴ ┴ ┴ ┴└─┘┘└┘└─┘

Create the job directory structure:

$ mkdir phantom_simulations
$ cd phantom_simulations

Copy all files into this directory.

Make the scripts executable:

$ chmod +x master-script.sh 

Run the master script...

Using default values (100 simulations, /scratch/ directory):

$ ./master-script.sh

Specifying number of simulations (500) and output directory (my_phantom_runs):

$ ./master-script.sh --n_sims 500 --output_dir my_phantom_runs

Using short flags:

$ ./master-script.sh -n 500 -d my_phantom_runs

Post-process your simulations (grabs 50th dump file):

sbatch post-process.sh
